def build_repair_prompt(bad_text: str) -> str:
    return f"""
Твоя задача: вернуть ОДИН валидный JSON-объект строго по схеме.
Не объясняй, не добавляй текст, не используй markdown. Только JSON.

Схема (все поля обязательны):
{{
  "K1": <int>,
  "K1_explanation": "<string>",
  "K2": <int>,
  "K2_explanation": "<string>",
  "K3": <int>,
  "K3_explanation": "<string>",
  "K4": <int>,
  "K4_explanation": "<string>"
}}

Правила:
- Ключи и строки ТОЛЬКО в двойных кавычках.
- K1..K4 — целые числа (от 0 до максимума для каждого критерия).
- ВСЕГДА используй ЛАТИНСКУЮ букву K (не кириллическую К) в ключах: "K1", "K2", "K3", "K4".
- Если в исходном тексте не хватает какого-то поля — восстанови наиболее вероятно по контексту, но не оставляй поле пустым.
- Никаких лишних ключей.
- Обязательно проверь, что все 8 полей присутствуют: K1, K1_explanation, K2, K2_explanation, K3, K3_explanation, K4, K4_explanation.

Исходный текст (его нужно привести к схеме):
{bad_text}
""".strip()
